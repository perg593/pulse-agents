## 1. Core Concepts

### 1.1 Theme Projects

The primary object is a **Theme Project**.

Each project represents one site (or client) and contains:

* **Input**

  * Target URL (e.g. `https://www.skechers.com`)
  * Number of pages to analyze (default: 3)
  * Optional notes and flags (e.g. “Light mode bias”, “Dark mode bias”)

* **Analysis Results**

  * Extracted color palette
  * Typography (fonts, sizes, weights)
  * Component style hints (buttons, links, inputs)
  * Evidence: snippets/samples from the site (for debugging/trust)

* **Themes**

  * At least 4 variants per project:

    * Brand Faithful
    * Light
    * Dark
    * Minimal / High-clarity
  * Each theme can be edited, duplicated, and exported.

* **Style Guide**

  * Visual document showing:

    * Colors
    * Typography
    * Component examples (single-choice, sliders, etc.)
  * Tied to a specific theme.

* **Exports**

  * CSS ready for Pulse console (copy–paste).
  * Optional: download bundle (tokens JSON + SCSS + CSS) for devs.

---

### 1.2 Theme Tokens (Conceptual Model)

Internally, themes should be represented as a **structured “Theme Tokens” object**, not just raw CSS.

The Theme Tokens object (conceptual, not tied to any specific language) includes:

* **Identity**

  * `id` – unique identifier
  * `name` – human label (“Brand Faithful”, “Visa Dark v2”)
  * `variantType` – e.g. `brand-faithful`, `light`, `dark`, `minimal`, `custom`
  * `sourceUrl` – where the theme came from (site URL, optional)
  * `createdAt`

* **Palette**

  * Neutral scale: `neutral0`, `neutral50`, `neutral100`, …, `neutral900`

    * Used for backgrounds, borders, text, etc.
  * Brand colors:

    * `brandPrimary`
    * `brandPrimarySoft` (optional)
    * `brandSecondary` (optional)
    * `accent`
  * Semantic colors:

    * `success`, `warning`, `danger`, `info`

* **Surfaces**

  * `appBackground` – base background (if needed)
  * `widgetBackground` – main survey container
  * `cardBackground`
  * `surfaceAlt` – alternate/hover surfaces
  * `borderSubtle`
  * `borderStrong`
  * `overlayBackground` – for overlays/modals (e.g. rgba black)

* **Text Roles**

  * `textPrimary`
  * `textSecondary`
  * `textMuted`
  * `textInverse` – text on dark backgrounds
  * `textLink`
  * `textLinkHover`
  * `textDanger`
  * `textSuccess`

* **Typography**

  * Font families:

    * `fontFamilyBase` (body text)
    * `fontFamilyHeading` (optional override)
    * `fontFamilyMono` (optional)
  * Base sizing:

    * `baseFontSize` (px)
    * `baseLineHeight` (unitless)
  * Text styles (include size, line-height, optional letter-spacing and weight):

    * `heading.h1`, `heading.h2`, `heading.h3`, `heading.h4`
    * `body`
    * `label`
    * `button`
    * `small`
  * These can be used to control **spacing and perceived kerning**:

    * Letter-spacing at least on buttons and headings.

* **Spacing**

  * A small scale of spacing tokens (pixels):

    * `spacing.xs`, `spacing.sm`, `spacing.md`, `spacing.lg`, `spacing.xl`
  * Used for:

    * Padding
    * Gaps between options
    * Widget margin / internal layout

* **Radii**

  * `radius.none`
  * `radius.sm`
  * `radius.md`
  * `radius.lg`
  * `radius.pill`
  * `radius.full`
  * Used for:

    * Buttons
    * Pills
    * Cards
    * Widgets

* **Elevation**

  * **Shadow tokens** (string values):

    * `elevation.subtle`
    * `elevation.raised`
    * `elevation.overlay`

* **Component-specific Tokens**

  Theme Tokens should understand **Pulse components**, not just generic buttons.

  * **Widget / Chrome**

    * `widget.headerBackground`
    * `widget.headerText`
    * `widget.bodyBackground`
    * `widget.bodyText`
    * `widget.border`
    * `widget.progressBackground`
    * `widget.progressFill`
    * `widget.overlayBackground`

  * **Single-choice option**

    * A set of **state tokens**:

      * `default` (bg, text, border)
      * `hover`
      * `active`
      * `disabled`
      * optional `focusRing` (color, width, offset)

  * **Multi-choice option**

    * Same model as single-choice (chips/checkbox-style).

  * **Tag pills / labels**

    * Tokens for “pill” styles (filters, segments).

  * **Buttons**

    * `ctaButton` (primary action)
    * `secondaryButton`
    * Each defines:

      * default/hover/active/disabled state colors
      * optional focus ring

  * **Inputs**

    * `textInput` (free-text answers)
    * `dropdownInput` (select-like)
    * Each defines:

      * default/hover/focus/disabled states
      * placeholder color
      * optional error styling (border, text, background)
      * optional focus ring

  * **Sliders / scales**

    * `slider.trackBackground`
    * `slider.trackFilled`
    * `slider.thumbBackground`
    * `slider.thumbBorder`
    * optional `slider.tickColor`, `slider.valueLabelText`

  * **Content links / promos**

    * Default/hover/visited colors, optional focus ring.

The point: a Theme is a **structured set of decisions** that can be used to:

* Drive **preview UI**
* Drive **SCSS template**
* Drive **style guide**

We are not locked into a specific implementation language here.

---

### 1.3 Theme Template (SCSS Engine)

Pulse already has SCSS files with:

* variables
* maps
* mixins
* selectors
* responsive behaviors

v3 should:

* Consolidate these into a **single SCSS “Theme Template”** that:

  * Contains the full implementation of how Pulse widgets are styled.
  * Expects a set of variables or a single map (e.g. `$tokens`) that corresponds to the Theme Tokens.

* This template should:

  * Know Pulse’s HTML structure (selectors, states).
  * Use the tokens for:

    * Colors
    * Fonts
    * Spacing
    * Radii
    * Component logic (e.g. single-choice vs slider)
  * Be versioned:

    * `ThemeTemplate v1` corresponds to current Pulse HTML/markup.
    * In future, `v2` can be created if markup changes.

Implementation detail (high-level):

* Theme Generator:

  * Takes a Theme Tokens object.
  * Emits a small SCSS snippet that sets variables / map values.
  * Imports the `theme-template.scss`.
  * Compiles SCSS → CSS.
* Pulse console:

  * Only ever sees the compiled CSS.