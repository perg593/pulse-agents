<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Removed meta refresh to prevent redirect loop - handled by JavaScript instead -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pulse Demo Studio</title>
  <script>
    (function () {
      if (window.__PI_PROXY_ORIGIN__) return;
      const localHosts = ['localhost', '127.0.0.1'];
      if (localHosts.includes(window.location.hostname)) {
        window.__PI_PROXY_ORIGIN__ = 'http://localhost:3100';
        return;
      }
      const origin = window.location.origin && window.location.origin !== 'null' ? window.location.origin : '/';
      window.__PI_PROXY_ORIGIN__ = origin || '/';
    })();
  </script>
  <style>
    :root {
      color-scheme: light dark;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0f172a;
      color: #f8fafc;
    }

    .card {
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.4);
      border-radius: 16px;
      padding: 32px;
      max-width: 420px;
      width: calc(100% - 32px);
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.35);
      text-align: center;
    }

    .card h1 {
      font-size: 1.5rem;
      margin: 0 0 0.75rem;
    }

    .card p {
      margin: 0 0 1.5rem;
      line-height: 1.5;
      color: rgba(226, 232, 240, 0.85);
    }

    .links {
      display: grid;
      gap: 12px;
    }

    .links a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 1rem;
      border-radius: 999px;
      font-weight: 600;
      text-decoration: none;
      transition: transform 120ms ease, background 120ms ease, color 120ms ease;
    }

    .links a.primary {
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      color: #0f172a;
    }

    .links a.secondary {
      background: rgba(148, 163, 184, 0.15);
      color: #e2e8f0;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    .links a:hover {
      transform: translateY(-1px);
    }

    .links a:focus {
      outline: 2px solid #38bdf8;
      outline-offset: 2px;
    }

    .meta {
      margin-top: 24px;
      font-size: 0.85rem;
      color: rgba(148, 163, 184, 0.7);
    }

    @media (prefers-color-scheme: light) {
      body {
        background: #f8fafc;
        color: #0f172a;
      }

      .card {
        background: rgba(255, 255, 255, 0.9);
        border-color: rgba(148, 163, 184, 0.35);
        box-shadow: 0 16px 32px rgba(15, 23, 42, 0.1);
      }

      .links a.secondary {
        background: rgba(148, 163, 184, 0.1);
        color: #0f172a;
      }

      .meta {
        color: rgba(71, 85, 105, 0.75);
      }
    }
  </style>
  <script>
    (function redirect() {
      try {
        // Prevent redirect loop: if we're already at /index.html or /preview/basic/index.html, don't redirect
        var currentPath = window.location.pathname;
        // If we're at root or index.html, don't redirect (root index.html is the actual app)
        if (currentPath === '/' || currentPath === '/index.html' || currentPath === '/preview/basic/index.html') {
          return;
        }
        
        var params = new URLSearchParams(window.location.search);
        var variant = (params.get('variant') || params.get('view') || '').toLowerCase();
        params.delete('variant');
        params.delete('view');
        var search = params.toString();
        var targetBase = '/index.html';  // Root index.html is the actual preview app
        if (variant === 'v3') {
          targetBase = '/preview/v3-prototype/index.html';
        }
        var target = targetBase;
        if (search) {
          target += '?' + search;
        }
        if (window.location.hash) {
          target += window.location.hash;
        }
        window.location.replace(target);
      } catch (error) {
        console.warn('Preview redirect failed', error);
      }
    })();
  </script>
</head>
<body>
  <div class="card">
    <h1>Redirecting to Pulse Demo Studio</h1>
    <p>If you are not redirected automatically, choose an experience below.</p>
    <div class="links">
      <a class="primary" href="/index.html">Open Preview (Basic)</a>
      <a class="secondary" href="/preview/v3-prototype/index.html">Open Preview v3 Prototype</a>
    </div>
    <p class="meta">Tip: append <code>?variant=v3</code> to jump straight into the v3 prototype.</p>
  </div>
  <noscript>
    <p style="position: absolute; inset: 16px; text-align: center; font-family: sans-serif;">
      JavaScript is required for automatic redirect. Use the links above to continue.
    </p>
  </noscript>
</body>
</html>
