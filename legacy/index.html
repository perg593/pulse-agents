<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pulse Widgets - Preview Dashboard</title>
    
    <!-- Pre-load comprehensive font collection for testing
         Includes: Inter, Roboto, Open Sans, Lato, Montserrat, Poppins, Source Sans Pro,
         Ubuntu, Nunito, PT Sans, Merriweather, Playfair Display, Lora, Crimson Text,
         Libre Baskerville, PT Serif, Source Serif Pro, Crimson Pro, Libre Franklin,
         Work Sans, DM Sans, DM Serif, Space Grotesk, Space Mono, JetBrains Mono,
         Fira Code, Cascadia Code, IBM Plex family, Red Hat family, Manrope, Epilogue,
         Outfit, Plus Jakarta Sans, Figtree, Geist family, Inter variants
         All weights from 100-900 for comprehensive testing -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Inter+Tight:wght@100;200;300;400;500;600;700;800;900&family=Inter+Display:wght@100;200;300;400;500;600;700;800;900&family=Inter+Variable:wght@100;200;300;400;500;600;700;800;900&family=Roboto:wght@100;300;400;500;700;900&family=Roboto+Slab:wght@100;200;300;400;500;600;700;800;900&family=Roboto+Condensed:wght@300;400;700&family=Roboto+Mono:wght@100;200;300;400;500;600;700&family=Open+Sans:wght@300;400;500;600;700;800&family=Open+Sans+Condensed:wght@300;700&family=Lato:wght@100;300;400;700;900&family=Montserrat:wght@100;200;300;400;500;600;700;800;900&family=Montserrat+Alternates:wght@100;200;300;400;500;600;700;800;900&family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Source+Sans+Pro:wght@200;300;400;600;700;900&family=Source+Serif+Pro:wght@200;300;400;600;700;900&family=Source+Code+Pro:wght@200;300;400;500;600;700;800;900&family=Ubuntu:wght@300;400;500;700&family=Ubuntu+Condensed&family=Ubuntu+Mono:wght@400;700&family=Nunito:wght@200;300;400;500;600;700;800;900&family=Nunito+Sans:wght@200;300;400;600;700;800;900&family=PT+Sans:wght@400;700&family=PT+Serif:wght@400;700&family=PT+Mono:wght@400;700&family=Merriweather:wght@300;400;700;900&family=Merriweather+Sans:wght@300;400;700;800&family=Playfair+Display:wght@400;500;600;700;800;900&family=Playfair+Display+SC:wght@400;700;900&family=Lora:wght@400;500;600;700&family=Crimson+Text:wght@400;600;700&family=Crimson+Pro:wght@200;300;400;500;600;700;800;900&family=Libre+Baskerville:wght@400;700&family=Libre+Franklin:wght@100;200;300;400;500;600;700;800;900&family=Work+Sans:wght@100;200;300;400;500;600;700;800;900&family=DM+Sans:wght@100;200;300;400;500;600;700;800;900&family=DM+Serif+Display:wght@400&family=DM+Serif+Text:wght@400;500;600&family=DM+Mono:wght@300;400;500&family=Space+Grotesk:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&family=JetBrains+Mono:wght@100;200;300;400;500;600;700;800&family=Fira+Code:wght@300;400;500;600;700&family=Fira+Sans:wght@100;200;300;400;500;600;700;800;900&family=Fira+Sans+Condensed:wght@100;200;300;400;500;600;700;800;900&family=Fira+Sans+Extra+Condensed:wght@100;200;300;400;500;600;700;800;900&family=Cascadia+Code:wght@200;300;400;500;600;700&family=IBM+Plex+Mono:wght@100;200;300;400;500;600;700&family=IBM+Plex+Sans:wght@100;200;300;400;500;600;700&family=IBM+Plex+Serif:wght@100;200;300;400;500;600;700&family=Red+Hat+Display:wght@300;400;500;600;700;800;900&family=Red+Hat+Text:wght@300;400;500;600;700&family=Red+Hat+Mono:wght@300;400;500;600;700&family=Manrope:wght@200;300;400;500;600;700;800&family=Epilogue:wght@100;200;300;400;500;600;700;800;900&family=Outfit:wght@100;200;300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@200;300;400;500;600;700;800&family=Figtree:wght@300;400;500;600;700;800;900&family=Geist:wght@100;200;300;400;500;600;700;800;900&family=Geist+Mono:wght@100;200;300;400;500;600;700;800;900&family=Geist+Sans:wght@100;200;300;400;500;600;700;800;900&family=Lexend:wght@100;200;300;400;500;600;700;800;900&family=Lexend+Deca:wght@100;200;300;400;500;600;700;800;900&family=Lexend+Exa:wght@100;200;300;400;500;600;700;800;900&family=Lexend+Giga:wght@100;200;300;400;500;600;700;800;900&family=Lexend+Mega:wght@100;200;300;400;500;600;700;800;900&family=Lexend+Peta:wght@100;200;300;400;500;600;700;800;900&family=Lexend+Tera:wght@100;200;300;400;500;600;700;800;900&family=Lexend+Zetta:wght@100;200;300;400;500;600;700;800;900&family=Atkinson+Hyperlegible:wght@400;700&family=Atkinson+Hyperlegible:wght@400;700&family=Recursive:wght@300;400;500;600;700;800;900&family=Recursive:wght@300;400;500;600;700;800;900&family=Noto+Sans:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif:wght@100;200;300;400;500;600;700;800;900&family=Noto+Mono&family=Noto+Sans+JP:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+JP:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+KR:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+KR:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+SC:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+SC:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+TC:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+TC:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Arabic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Arabic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Devanagari:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Devanagari:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Hebrew:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Hebrew:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Thai:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Thai:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Bengali:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Bengali:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Tamil:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Tamil:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Telugu:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Telugu:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Gujarati:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Gujarati:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Malayalam:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Malayalam:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Kannada:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Kannada:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Oriya:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Oriya:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Punjabi:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Punjabi:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Malayalam:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Malayalam:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Myanmar:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Myanmar:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Khmer:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Khmer:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Lao:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Lao:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Ethiopic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Ethiopic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Armenian:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Armenian:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Georgian:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Georgian:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Cherokee:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Cherokee:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Canadian+Aboriginal:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Canadian+Aboriginal:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Ogham:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Ogham:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Runic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Runic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Shavian:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Shavian:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Linear+A:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Linear+A:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Linear+B:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Linear+B:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Cypriot:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Cypriot:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Ugaritic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Ugaritic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Old+Italic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Old+Italic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Gothic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Gothic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Old+Persian:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Old+Persian:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Avestan:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Avestan:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Old+Turkic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Old+Turkic:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&family=Noto+Serif+Phags+Pa:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- AirSupra Brand Fonts - Downloaded locally for testing -->
    <style>
        @font-face {
            font-family: 'Montserrat';
            src: url('fonts/airsupra/Montserrat-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'Montserrat';
            src: url('fonts/airsupra/Montserrat-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
        }
        @font-face {
            font-family: 'Montserrat';
            src: url('fonts/airsupra/Montserrat-Medium.ttf') format('truetype');
            font-weight: 500;
            font-style: normal;
        }
        @font-face {
            font-family: 'Montserrat';
            src: url('fonts/airsupra/Montserrat-Light.ttf') format('truetype');
            font-weight: 300;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow';
            src: url('fonts/airsupra/Barlow-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow';
            src: url('fonts/airsupra/Barlow-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow';
            src: url('fonts/airsupra/Barlow-Medium.ttf') format('truetype');
            font-weight: 500;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow';
            src: url('fonts/airsupra/Barlow-Light.ttf') format('truetype');
            font-weight: 300;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow';
            src: url('fonts/airsupra/Barlow-SemiBold.ttf') format('truetype');
            font-weight: 600;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow';
            src: url('fonts/airsupra/Barlow-Black.ttf') format('truetype');
            font-weight: 900;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow Condensed';
            src: url('fonts/airsupra/BarlowCondensed-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow Condensed';
            src: url('fonts/airsupra/BarlowCondensed-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow Condensed';
            src: url('fonts/airsupra/BarlowCondensed-Medium.ttf') format('truetype');
            font-weight: 500;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow Condensed';
            src: url('fonts/airsupra/BarlowCondensed-Light.ttf') format('truetype');
            font-weight: 300;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow Condensed';
            src: url('fonts/airsupra/BarlowCondensed-SemiBold.ttf') format('truetype');
            font-weight: 600;
            font-style: normal;
        }
        @font-face {
            font-family: 'Barlow Condensed';
            src: url('fonts/airsupra/BarlowCondensed-Black.ttf') format('truetype');
            font-weight: 900;
            font-style: normal;
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f5f5;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 280px;
            background-color: #2c3e50;
            color: white;
            overflow-y: auto;
            padding: 12px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }

        .sidebar h1 {
            font-size: 18px;
            margin-bottom: 16px;
            color: #ecf0f1;
            border-bottom: 1px solid #3498db;
            padding-bottom: 6px;
        }

        .widget-type-section {
            margin-bottom: 20px;
            background-color: #34495e;
            border-radius: 6px;
            padding: 12px;
        }

        .widget-type-title {
            font-size: 14px;
            font-weight: 600;
            color: #ecf0f1;
            margin-bottom: 10px;
            text-align: center;
            border-bottom: 1px solid #3498db;
            padding-bottom: 6px;
        }

        .desktop-mobile-container {
            display: flex;
            gap: 8px;
        }

        .desktop-section, .mobile-section {
            flex: 1;
            background-color: #2c3e50;
            border-radius: 4px;
            padding: 8px;
        }

        .section-title {
            font-size: 11px;
            font-weight: 600;
            color: #3498db;
            margin-bottom: 8px;
            padding: 4px 6px;
            background-color: #34495e;
            border-radius: 3px;
            text-align: center;
        }

        .file-list {
            list-style: none;
            margin: 0;
        }

        .file-list li {
            margin-bottom: 3px;
        }

        .file-list a {
            color: #bdc3c7;
            text-decoration: none;
            padding: 4px 6px;
            display: block;
            border-radius: 3px;
            transition: all 0.3s;
            font-size: 11px;
        }

        .file-list a:hover {
            background-color: #34495e;
            color: #ecf0f1;
        }

        .file-list a.active {
            background-color: #3498db;
            color: white;
        }

        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .toolbar {
            background-color: white;
            padding: 6px 12px;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .url-input-container {
            display: flex;
            align-items: center;
            gap: 6px;
            flex: 1;
            min-width: 200px;
        }

        .theme-container {
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 150px;
        }

        .theme-select {
            padding: 6px 8px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 12px;
            background-color: white;
            min-width: 120px;
        }

        .theme-select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 1px rgba(52, 152, 219, 0.2);
        }

        .url-input {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 12px;
            min-width: 150px;
        }

        .url-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 1px rgba(52, 152, 219, 0.2);
        }

        .url-label {
            font-weight: 600;
            color: #2c3e50;
            white-space: nowrap;
            font-size: 12px;
        }

        .current-file {
            font-weight: 600;
            color: #2c3e50;
            font-size: 12px;
        }

        .controls {
            display: flex;
            gap: 6px;
        }

        .btn {
            padding: 4px 8px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            transition: background-color 0.3s;
        }

        .btn-primary {
            background-color: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
        }

        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #7f8c8d;
        }

        .iframe-container {
            flex: 1;
            position: relative;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 8px;
        }

        .iframe-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .background-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: 1;
        }

        .widget-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            background-color: transparent;
            z-index: 2;
            pointer-events: auto;
        }

        .widget-iframe.disabled {
            pointer-events: none;
        }

        /* Mobile simulation styles */
        .iframe-wrapper.mobile-simulation {
            max-width: 390px;
            margin: 0 auto;
            border: 2px solid #333;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .iframe-wrapper.mobile-simulation .background-iframe {
            width: 100%;
            height: 100%;
        }

        .iframe-wrapper.mobile-simulation .widget-iframe {
            width: 100%;
            height: 100%;
        }

        .mobile-indicator {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            z-index: 10;
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #7f8c8d;
            font-size: 16px;
        }

        .folder-content {
            display: none;
        }

        .folder-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 250px;
            }
            
            .toolbar {
                padding: 10px 15px;
            }
            
            .current-file {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h1>Pulse Widgets</h1>
            
            <!-- Docked Widget -->
            <div class="widget-type-section">
                <div class="widget-type-title">üìÅ Docked Widget</div>
                <div class="desktop-mobile-container">
                    <div class="desktop-section">
                        <div class="section-title">üñ•Ô∏è Desktop</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                    <div class="mobile-section">
                        <div class="section-title">üì± Mobile</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget_mobile/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget_mobile/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget_mobile/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget_mobile/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget_mobile/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget_mobile/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget_mobile/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/docked_widget_mobile/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Bottom Bar Widget -->
            <div class="widget-type-section">
                <div class="widget-type-title">üìÅ Bottom Bar Widget</div>
                <div class="desktop-mobile-container">
                    <div class="desktop-section">
                        <div class="section-title">üñ•Ô∏è Desktop</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                    <div class="mobile-section">
                        <div class="section-title">üì± Mobile</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar_mobile/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar_mobile/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar_mobile/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar_mobile/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar_mobile/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar_mobile/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar_mobile/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/bottom_bar_mobile/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Inline Widget -->
            <div class="widget-type-section">
                <div class="widget-type-title">üìÅ Inline Widget</div>
                <div class="desktop-mobile-container">
                    <div class="desktop-section">
                        <div class="section-title">üñ•Ô∏è Desktop</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                    <div class="mobile-section">
                        <div class="section-title">üì± Mobile</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline_mobile/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline_mobile/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline_mobile/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline_mobile/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline_mobile/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline_mobile/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline_mobile/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/inline_mobile/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Overlay Widget -->
            <div class="widget-type-section">
                <div class="widget-type-title">üìÅ Overlay Widget</div>
                <div class="desktop-mobile-container">
                    <div class="desktop-section">
                        <div class="section-title">üñ•Ô∏è Desktop</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                    <div class="mobile-section">
                        <div class="section-title">üì± Mobile</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay_mobile/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay_mobile/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay_mobile/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay_mobile/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay_mobile/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay_mobile/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay_mobile/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/overlay_mobile/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Top Bar Widget -->
            <div class="widget-type-section">
                <div class="widget-type-title">üìÅ Top Bar Widget</div>
                <div class="desktop-mobile-container">
                    <div class="desktop-section">
                        <div class="section-title">üñ•Ô∏è Desktop</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                    <div class="mobile-section">
                        <div class="section-title">üì± Mobile</div>
                        <ul class="file-list">
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar_mobile/single_choice_standard_buttons.html', this)">Single Choice (Standard Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar_mobile/single_choice_radio_buttons.html', this)">Single Choice (Radio Buttons)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar_mobile/single_choice_dropdown_menu.html', this)">Single Choice (Dropdown)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar_mobile/multiple_choice.html', this)">Multiple Choice</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar_mobile/free_text_single_line.html', this)">Free Text (Single Line)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar_mobile/free_text_multiple_lines.html', this)">Free Text (Multiple Lines)</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar_mobile/custom_content.html', this)">Custom Content</a></li>
                            <li><a href="#" onclick="loadFile('proof_of_concept/top_bar_mobile/thank_you.html', this)">Thank You</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-area">
            <div class="toolbar">
                <div class="url-input-container">
                    <label class="url-label" for="background-url">Background URL:</label>
                    <input type="url" id="background-url" class="url-input" placeholder="https://example.com" value="simple-background.html">
                    <button class="btn btn-primary" onclick="loadBackground()">Load Background</button>
                </div>
                <div class="theme-container">
                    <label class="url-label" for="theme-select">Theme:</label>
                    <select id="theme-select" class="theme-select" onchange="applyTheme()">
                        <option value="">Default Theme</option>
                    </select>
                </div>
                <div class="current-file" id="current-file">Select a widget to preview</div>
                <div class="controls">
                    <button class="btn btn-secondary" onclick="toggleMobileSimulation()">üì± Mobile</button>
                    <button class="btn btn-primary" onclick="refreshFrame()">Refresh</button>
                    <button class="btn btn-secondary" onclick="openInNewTab()">New Tab</button>
                </div>
            </div>
            <div class="iframe-container">
                <div class="loading" id="loading" style="display: none;">Loading...</div>
                <div class="iframe-wrapper" id="iframe-wrapper">
                    <div class="mobile-indicator" id="mobile-indicator" style="display: none;">üì± Mobile Simulation</div>
                    <iframe id="background-frame" class="background-iframe" src="about:blank"></iframe>
                    <iframe id="widget-frame" class="widget-iframe" src="about:blank"></iframe>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentFile = null;
        let currentBackground = null;

        function loadBackground() {
            const url = document.getElementById('background-url').value.trim();
            if (!url) {
                alert('Please enter a valid URL');
                return;
            }

            // Handle local files vs external URLs
            let backgroundUrl = url;
            if (!url.startsWith('http://') && !url.startsWith('https://') && !url.startsWith('file://')) {
                // If it's a local file (ends with .html), use it as-is
                if (url.endsWith('.html')) {
                    backgroundUrl = url;
                } else {
                    // For other cases, assume it's an external URL and add https://
                    backgroundUrl = 'https://' + url;
                }
            }

            currentBackground = backgroundUrl;
            document.getElementById('loading').style.display = 'block';

            const backgroundFrame = document.getElementById('background-frame');
            backgroundFrame.onload = function() {
                document.getElementById('loading').style.display = 'none';
            };
            backgroundFrame.src = backgroundUrl;
        }

        function toggleMobileSimulation() {
            const iframeWrapper = document.getElementById('iframe-wrapper');
            const mobileIndicator = document.getElementById('mobile-indicator');
            const button = event.target;
            
            if (iframeWrapper.classList.contains('mobile-simulation')) {
                iframeWrapper.classList.remove('mobile-simulation');
                mobileIndicator.style.display = 'none';
                button.textContent = 'üì± Mobile';
                button.classList.remove('btn-primary');
                button.classList.add('btn-secondary');
            } else {
                iframeWrapper.classList.add('mobile-simulation');
                mobileIndicator.style.display = 'block';
                button.textContent = 'üñ•Ô∏è Desktop';
                button.classList.remove('btn-secondary');
                button.classList.add('btn-primary');
            }
        }

        function loadFile(filePath, element) {
            // Remove active class from all links
            document.querySelectorAll('.file-list a').forEach(link => {
                link.classList.remove('active');
            });

            // Add active class to clicked link
            element.classList.add('active');

            // Update current file display
            currentFile = filePath;
            document.getElementById('current-file').textContent = filePath;

            // Check if this is a mobile widget
            const isMobile = filePath.includes('_mobile/');
            const iframeWrapper = document.getElementById('iframe-wrapper');
            const mobileIndicator = document.getElementById('mobile-indicator');

            if (isMobile) {
                iframeWrapper.classList.add('mobile-simulation');
                mobileIndicator.style.display = 'block';
            } else {
                iframeWrapper.classList.remove('mobile-simulation');
                mobileIndicator.style.display = 'none';
            }

            // Show loading
            document.getElementById('loading').style.display = 'block';

            // Load file in widget iframe
            const widgetFrame = document.getElementById('widget-frame');
            widgetFrame.onload = function() {
                document.getElementById('loading').style.display = 'none';
            };
            widgetFrame.src = filePath;
        }

        function refreshFrame() {
            if (currentFile) {
                document.getElementById('loading').style.display = 'block';
                
                // Reapply mobile simulation if needed
                const isMobile = currentFile.includes('_mobile/');
                const iframeWrapper = document.getElementById('iframe-wrapper');
                const mobileIndicator = document.getElementById('mobile-indicator');

                if (isMobile) {
                    iframeWrapper.classList.add('mobile-simulation');
                    mobileIndicator.style.display = 'block';
                } else {
                    iframeWrapper.classList.remove('mobile-simulation');
                    mobileIndicator.style.display = 'none';
                }

                const widgetFrame = document.getElementById('widget-frame');
                
                // Add theme parameter to URL if theme is selected
                let widgetUrl = currentFile;
                if (currentTheme) {
                    const themeParam = `?theme=${currentTheme.clientName}/${currentTheme.theme.id}`;
                    widgetUrl = currentFile + themeParam;
                }
                
                widgetFrame.src = widgetUrl;
            }
        }

        function openInNewTab() {
            if (currentFile) {
                window.open(currentFile, '_blank');
            }
        }

        // Theme functionality
        let currentTheme = null;
        let availableThemes = {};

        async function loadThemes() {
            try {
                const response = await fetch('/theme-generator/output/client-themes/index.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const themes = await response.json();
                availableThemes = themes;
                
                const themeSelect = document.getElementById('theme-select');
                if (!themeSelect) {
                    console.error('Theme select element not found!');
                    return;
                }
                themeSelect.innerHTML = '<option value="">Default Theme</option>';
                
                Object.keys(themes).forEach(clientName => {
                    const client = themes[clientName];
                    const optgroup = document.createElement('optgroup');
                    optgroup.label = client.name;
                    
                    client.themes.forEach(theme => {
                        const option = document.createElement('option');
                        option.value = `${clientName}/${theme.id}`;
                        option.textContent = theme.name;
                        option.title = theme.description;
                        optgroup.appendChild(option);
                    });
                    
                    themeSelect.appendChild(optgroup);
                });
                
                console.log('Themes loaded successfully:', Object.keys(themes));
            } catch (error) {
                console.error('Failed to load themes:', error);
                // Add a fallback option
                const themeSelect = document.getElementById('theme-select');
                if (themeSelect) {
                    themeSelect.innerHTML = '<option value="">Default Theme</option><option disabled>No themes available</option>';
                }
            }
        }

        function applyTheme() {
            console.log('applyTheme called');
            const themeSelect = document.getElementById('theme-select');
            const selectedTheme = themeSelect.value;
            console.log('Selected theme:', selectedTheme);
            
            if (selectedTheme === '') {
                // Remove current theme
                removeCurrentTheme();
                currentTheme = null;
                console.log('Theme removed');
            } else {
                // Apply new theme
                const [clientName, themeId] = selectedTheme.split('/');
                console.log('Client:', clientName, 'Theme ID:', themeId);
                console.log('Available themes:', availableThemes);
                
                const theme = availableThemes[clientName].themes.find(t => t.id === themeId);
                console.log('Found theme:', theme);
                
                if (theme) {
                    // Set currentTheme BEFORE calling loadTheme
                    currentTheme = { clientName, theme };
                    loadTheme(clientName, theme);
                    
                    // Reload current widget with new theme
                    if (currentFile) {
                        const widgetFrame = document.getElementById('widget-frame');
                        const themeParam = `?theme=${currentTheme.clientName}/${currentTheme.theme.id}`;
                        const widgetUrl = currentFile + themeParam;
                        console.log('Loading widget with theme:', widgetUrl);
                        widgetFrame.src = widgetUrl;
                    }
                } else {
                    console.error('Theme not found:', clientName, themeId);
                }
            }
        }

        function loadTheme(clientName, theme) {
            // Remove current theme first
            removeCurrentTheme();
            
            // Load new theme
            const themeUrl = `/theme-generator/output/client-themes/${clientName}/${theme.file}`;
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = themeUrl;
            link.id = 'current-theme';
            link.onload = function() {
                currentTheme = { clientName, theme };
                console.log(`Applied theme: ${theme.name} (${clientName})`);
            };
            link.onerror = function() {
                console.error(`Failed to load theme: ${theme.name}`);
                alert(`Failed to load theme: ${theme.name}`);
            };
            
            document.head.appendChild(link);
        }

        function removeCurrentTheme() {
            const existingTheme = document.getElementById('current-theme');
            if (existingTheme) {
                existingTheme.remove();
            }
        }

        function applyThemeToWidget(widgetFrame) {
            try {
                const widgetDoc = widgetFrame.contentDocument || widgetFrame.contentWindow.document;
                if (widgetDoc) {
                    // Remove existing theme from widget
                    const existingTheme = widgetDoc.getElementById('applied-theme');
                    if (existingTheme) {
                        existingTheme.remove();
                    }
                    
                    // Add current theme to widget
                    if (currentTheme) {
                        const themeUrl = `theme-generator/output/client-themes/${currentTheme.clientName}/${currentTheme.theme.file}`;
                        const link = widgetDoc.createElement('link');
                        link.rel = 'stylesheet';
                        link.href = themeUrl;
                        link.id = 'applied-theme';
                        widgetDoc.head.appendChild(link);
                    }
                }
            } catch (error) {
                console.error('Failed to apply theme to widget:', error);
            }
        }


        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'r':
                        e.preventDefault();
                        refreshFrame();
                        break;
                    case 'o':
                        e.preventDefault();
                        openInNewTab();
                        break;
                }
            }
        });

        // Load default background and first file
        window.addEventListener('load', function() {
            // Load themes
            loadThemes();
            
            // Load default background
            loadBackground();
            
            // Load first file
            const firstLink = document.querySelector('.file-list a');
            if (firstLink) {
                firstLink.click();
            }
        });
    </script>
</body>
</html>
